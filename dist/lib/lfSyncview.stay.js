var validArgs=function(){for(var e=[],t=PPx.Arguments;!t.atEnd();t.moveNext())e.push(t.value);return e},safeArgs=function(){for(var e=[],t=validArgs(),n=0,u=arguments.length;n<u;n++)e.push(_valueConverter(n<0||arguments.length<=n?undefined:arguments[n],t[n]));return e},_valueConverter=function(e,t){if(null==t||""===t)return null!=e?e:undefined;switch(typeof e){case"number":var n=Number(t);return isNaN(n)?e:n;case"boolean":return"false"!==t&&"0"!==t&&null!=t;default:return t}},e={tempKey:"K_ppmTemp",tempMenu:"M_ppmTemp",lfDset:"ppmlfdset"},isEmptyStr=function(e){return""===e},t=8e4,n="ppm_lfsyncview",u={},main=function(){var n=safeArgs("@\\Y",0,0,"0"),c=n[0],p=n[1],r=n[2],i=n[3],x=PPx.Extract("%*extract(%%su'"+e.lfDset+"%n')");isEmptyStr(x)?PPx.Execute('%K"'+c+'"'):(u.close=1===r,u.debug="DEBUG"===i,u.debug&&debugMsg("start"),startPPv(p),PPx.StayMode=t,ppx_Syncview())},ppx_Syncview=function(){isEmptyStr(PPx.Extract("%N"+u.ppvid))?ppx_resume():PPx.Execute("*execute "+u.ppvid+',%%J"%*name(DC,"%*comment")"')},ppx_resume=function(){PPx.StayMode=0,PPx.SyncView=0,PPx.Execute(selectevent("")),u.close&&PPx.Execute("*closeppx "+u.ppvid),u.debug&&debugMsg("discard")},startPPv=function(e){var n=1===e?"-popup:%~N":"";PPx.Execute("%Oai *ppv "+n),PPx.Sleep(100),u.ppvid=PPx.Extract('%*extract(V,"%%n")'),2===e&&PPx.Execute("*capturewindow "+u.ppvid+" -pane:~ -selectnoactive"),PPx.Execute(selectevent('*if ("%n"=="%%n")%%:*script ":'+t+',ppx_Syncview"'))},selectevent=function(e){return"*linecust "+n+",KC_main:SELECTEVENT,"+e},debugMsg=function(e){return PPx.linemessage("[DEBUG] lfSyncView "+e)};main();
