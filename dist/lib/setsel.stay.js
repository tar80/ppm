var isEmptyStr=function(e){return""===e},isZero=function(e){return"string"==typeof e?"0"===e:0===e},pathSelf=function(){var e,t,r=PPx.ScriptName;return~r.indexOf("\\")?(e=r.replace(/^.*\\/,""),t=PPx.Extract("%*name(DKN,"+r+")")):(e=r,t=PPx.Extract("%FDN")),{scriptName:e,parentDir:t.replace(/\\$/,"")}},validArgs=function(){for(var e=[],t=PPx.Arguments;!t.atEnd();t.moveNext())e.push(t.value);return e},safeArgs=function(){for(var e=[],t=validArgs(),r=0,n=arguments.length;r<n;r++)e.push(_valueConverter(r<0||arguments.length<=r?undefined:arguments[r],t[r]));return e},_valueConverter=function(e,t){if(null==t||""===t)return null!=e?e:undefined;switch(typeof e){case"number":var r=Number(t);return isNaN(r)?e:r;case"boolean":return"false"!==t&&"0"!==t&&null!=t;default:return t}},ppx_Discard=function(e,t){var r;PPx.StayMode=0,t=null!=(r=t)?r:"","DEBUG"===e&&PPx.linemessage("[DEBUG] discard "+t)},e={hold:function(e,t){void 0===t&&(t="0");var r=PPx.Extract("%N"),n='KC_main:ACTIVEEVENT,*script ":'+PPx.StayMode+',ppx_Discard",'+t+","+e+"%%:*linecust "+e+"_"+r+",KC_main:ACTIVEEVENT,";PPx.Execute("*linecust "+e+"_"+r+","+n+'%K"@LOADEVENT"')},ppx_Discard:ppx_Discard},main=function(){var t=safeArgs("","0",""),r=t[0],n=t[1],a=t[2];if(isEmptyStr(r)||r.split(")").length<3){var i=pathSelf(),u=i.scriptName,c=i.parentDir;PPx.Execute('*script "'+c+'\\errors.js",arg,'+u),PPx.Quit(-1)}"1"===a&&(PPx.StayMode=2,e.hold("ppm_setsel")),ppx_resume(r,n)},ppx_resume=function(e,t){var r=PPx.Extract("%*edittext()"),n=isZero(t)?selectSingle(r,e):selectMulti(r,e);n&&n.w!==n.l&&PPx.Execute("*sendmessage %N,177,"+n.w+","+n.l)},selectSingle=function(e,t){var r=RegExp(t),n=e.match(r);if(n){var a=n[1].length;return{w:a,l:a+n[2].length}}},selectMulti=function(e,t){var r=Number(PPx.Extract("%*editprop(start)")),n=e.slice(0,r),a=e.slice(r),i=RegExp(t.slice(0,t.lastIndexOf(")")+1),"m"),u=RegExp(t.slice(t.lastIndexOf("(")),"m"),c=!1,l=n.replace(i,(function(e,t){return c=!0,t})).length;return{w:c||l!==r?l:0,l:r+a.replace(u,"$1").length}};main();
